{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49152661-7859b232d7a733d1d995afa08';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      per_page: 15,\n      page: page,\n    },\n  });\n\n\n  if (response.data.hits.length === 0) {\n    throw new Error('Sorry, there are no images matching your search query. Please, try again!');\n  }\n\n  return { hits: response.data.hits, totalHits: response.data.totalHits };\n}","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nexport function renderImages(images, gallery, append = false) {\n  if (!append) {\n    gallery.innerHTML = '';\n  }\n  images.forEach((image) => {\n    const card = document.createElement('div');\n    card.classList.add('image-card');\n    card.innerHTML = `\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n                 <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"thumbnail\" />\n            </a>\n            <div class=\"image-info\">\n                <div class=\"info-field\">\n                  <h3>Likes</h3>\n                  <p>${image.likes}</p>\n                </div>\n\n                <div class=\"info-field\">\n                  <h3>Views</h3>\n                  <p>${image.views}</p>\n                </div>\n                <div class=\"info-field\">\n                  <h3>Comments</h3>\n                  <p> ${image.comments}</p>\n                </div>\n                <div class=\"info-field\">\n                  <h3>Downloads</h3>\n                  <p>${image.downloads}</p>\n                </div>\n            </div>\n        `;\n    gallery.appendChild(card);\n  });\n  new SimpleLightbox('[data-lightbox=\\'gallery\\']').refresh();\n}\n\nexport function smoothScrollToNewImages() {\n  const card = document.querySelector('.image-card');\n  if (card) {\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  }\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, smoothScrollToNewImages } from './js/render-functions.js';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('#search-form');\n  const input = document.querySelector('#search-input');\n  const gallery = document.querySelector('#gallery');\n  const loader = document.querySelector('#loader');\n  const loadMoreBtn = document.querySelector('#load-more');\n\n  let query = '';\n  let page = 1;\n  let totalHits = 0;\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    query = input.value.trim();\n    if (!query) {\n      iziToast.error({ title: 'Error', message: 'Search query cannot be empty!' });\n      return;\n    }\n\n    page = 1;\n    loader.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n\n    try {\n      const { hits, totalHits: fetchedTotalHits } = await fetchImages(query, page);\n      totalHits = fetchedTotalHits;\n      renderImages(hits, gallery);\n      if (hits.length < totalHits) {\n        loadMoreBtn.style.display = 'block';\n      }\n    } catch (error) {\n      iziToast.warning({ title: 'No Results', message: error.message });\n      loadMoreBtn.style.display = 'none';\n    } finally {\n      loader.style.display = 'none';\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    loader.style.display = 'block';\n    try {\n      const { hits } = await fetchImages(query, page);\n      renderImages(hits, gallery, true);\n      smoothScrollToNewImages();\n\n      if (page * 15 >= totalHits) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({ title: 'End', message: 'We\\'re sorry, but you\\'ve reached the end of search results.' });\n      }\n    } catch (error) {\n      iziToast.warning({ title: 'No Results', message: error.message });\n      loadMoreBtn.style.display = 'none';\n    } finally {\n      loader.style.display = 'none';\n    }\n  });\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","response","axios","renderImages","images","gallery","append","image","card","SimpleLightbox","smoothScrollToNewImages","cardHeight","form","input","loader","loadMoreBtn","totalHits","e","iziToast","hits","fetchedTotalHits","error"],"mappings":"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"}